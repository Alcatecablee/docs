2025-11-15 05:56:50.327 [info] {"level":30,"time":1763186210327,"pid":4,"hostname":"169.254.22.37","req":{"id":1,"method":"GET","url":"/api/battlecards","query":{},"params":{},"headers":{"x-forwarded-for":"197.184.108.125","sec-ch-ua":"\"Chromium\";v=\"142\", \"Google Chrome\";v=\"142\", \"Not_A Brand\";v=\"99\"","x-vercel-ja4-digest":"t13d1611h2_1711a4c0508c_6d021c4c45cd","x-vercel-internal-ingress-port":"18444","authorization":"Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6Indpd2RUWjNnMHJ3UXllM3giLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FmZ2ptY2l3c21odnFlcWduY2NiLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiI2YzkwMGJkZS0zYzUxLTRjN2QtOTQ3Yi04YmMxN2Y2ZTIwNjgiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzYzMTg3MzA1LCJpYXQiOjE3NjMxODM3MDUsImVtYWlsIjoiYWxjYXRlY2FibGVAZ21haWwuY29tIiwicGhvbmUiOiIiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbCI6ImFsY2F0ZWNhYmxlQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaG9uZV92ZXJpZmllZCI6ZmFsc2UsInN1YiI6IjZjOTAwYmRlLTNjNTEtNGM3ZC05NDdiLThiYzE3ZjZlMjA2OCJ9LCJyb2xlIjoiYXV0aGVudGljYXRlZCIsImFhbCI6ImFhbDEiLCJhbXIiOlt7Im1ldGhvZCI6InBhc3N3b3JkIiwidGltZXN0YW1wIjoxNzYyNzcwNDYzfV0sInNlc3Npb25faWQiOiJiNzRjNGY3Ny0yMjNkLTQ5NzUtODQ5MC1iY2Y3MGU1ZmEyNGQiLCJpc19hbm9ueW1vdXMiOmZhbHNlfQ.t1YiE8xXHXCIa9XWFTd-fmNN1Mv0xSkPBePjQkJd-2M","x-vercel-deployment-url":"site-to-681899ib6-alcatecs-projects.vercel.app","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36","x-vercel-ip-city":"Johannesburg","content-type":"application/json","x-vercel-ip-as-number":"37105","x-vercel-ip-continent":"AF","x-frame-options":"DENY","x-vercel-ip-longitude":"28.0583","x-vercel-oidc-token":"eyJhbGciOiJSUzI1NiIsImtpZCI6Im1yay00MzAyZWMxYjY3MGY0OGE5OGFkNjFkYWRlNGEyM2JlNyIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJodHRwczpcL1wvdmVyY2VsLmNvbVwvYWxjYXRlY3MtcHJvamVjdHMiLCJwcm9qZWN0X2lkIjoicHJqXzN6dmp0UUpXZ25UeTBGWkM4TW5EWkUwc25uMm8iLCJvd25lcl9pZCI6InRlYW1fU09rQTJ3UVRrc2Y2V3M0QnhhNTRnTkFOIiwiZW52aXJvbm1lbnQiOiJwcm9kdWN0aW9uIiwiaWF0IjoxNzYzMTgzNzAxLCJwcm9qZWN0Ijoic2l0ZS10by1kb2MiLCJuYmYiOjE3NjMxODM3MDEsInN1YiI6Im93bmVyOmFsY2F0ZWNzLXByb2plY3RzOnByb2plY3Q6c2l0ZS10by1kb2M6ZW52aXJvbm1lbnQ6cHJvZHVjdGlvbiIsInZlcmNlbF9pZCI6ImNwdDE6OnZoOG1oLTE3NjMxODM3MDA3NzQtMDk2ZWZlYjk3ODI1IiwiZXhwIjoxNzYzMTg3MzAxLCJzY29wZSI6Im93bmVyOmFsY2F0ZWNzLXByb2plY3RzOnByb2plY3Q6c2l0ZS10by1kb2M6ZW52aXJvbm1lbnQ6cHJvZHVjdGlvbiIsInBsYW4iOiJob2JieSIsImlzcyI6Imh0dHBzOlwvXC9vaWRjLnZlcmNlbC5jb21cL2FsY2F0ZWNzLXByb2plY3RzIiwib3duZXIiOiJhbGNhdGVjcy1wcm9qZWN0cyJ9.hhXFd74KqaAle1CFP2uo_kvSvRcedIItQKcQakkDRieNmKei8rxnj_PORCxb-mDybGRvfqSXuhF2bwXQsIbVTH1Xe0xjNSoVq0n_Bt1iVs3oIRo4t7Gl0cQpQEB40L2BO4XMVWFJzmYcRek0bHQZ7BXRJ3p95Y8zJA_RDZHtpLEx0UFmqabOV1nD71dnGzhNzAJDJTtXSNV8R1JtjSzX07r6QgnXP0rJUPsOH9h5Lf1DPC2-XnBWaUjpC7XKzvV77FmbdB13h_o1wyQRkdH_EK1NqiAPftHb4SJ0fZ9Dt_P6P-aPqlet4C145JR-yPBS2AxBL-xAC-qRLcrderAGaA","sec-ch-ua-mobile":"?0","x-vercel-proxy-signature-ts":"1763186504","accept-language":"en-US,en;q=0.9","x-vercel-ip-latitude":"-26.2309","x-vercel-ip-postal-code":"2091","strict-transport-security":"max-age=63072000; includeSubDomains; preload","x-forwarded-proto":"https","sec-fetch-site":"same-origin","x-vercel-id":"cpt1::447rp-1763186204589-2e3325354847","x-real-ip":"197.184.108.125","sec-fetch-dest":"empty","permissions-policy":"camera=(), microphone=(), geolocation=()","content-security-policy":"default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' data: blob: https:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https: wss:; frame-src https:; frame-ancestors 'none'; base-uri 'self'; form-action 'self'","x-vercel-forwarded-for":"197.184.108.125","host":"site-to-doc.vercel.app","sec-fetch-mode":"cors","x-forwarded-host":"site-to-doc.vercel.app","x-vercel-internal-ingress-bucket":"bucket018","priority":"u=1, i","accept":"*/*","x-vercel-proxy-signature":"Bearer 16a98fc896ca52b431485490bbd6b9dc271accb0f2ecdc8c9c8cce33cc17a25e","forwarded":"for=197.184.108.125;host=site-to-doc.vercel.app;proto=https;sig=0QmVhcmVyIDE2YTk4ZmM4OTZjYTUyYjQzMTQ4NTQ5MGJiZDZiOWRjMjcxYWNjYjBmMmVjZGM4YzljOGNjZTMzY2MxN2EyNWU=;exp=1763186504","x-vercel-internal-bot-check":"skip","x-content-type-options":"nosniff","x-vercel-ip-country-region":"GP","accept-encoding":"gzip, deflate, br","referrer-policy":"no-referrer","x-vercel-proxied-for":"197.184.108.125","x-vercel-ip-timezone":"Africa/Johannesburg","x-vercel-ip-country":"ZA","x-vercel-function-path":"api","sec-ch-ua-platform":"\"Windows\"","x-xss-protection":"0","connection":"close"},"remoteAddress":"127.0.0.1","remotePort":39594},"res":{"statusCode":200,"headers":{"x-powered-by":"Express","content-type":"application/json; charset=utf-8","content-length":"18","etag":"W/\"12-UrNwPRtHyEsqRQaQcJkB9ySFTx0\"","x-vercel-internal-timing":"bytecode-miss;offset=0,bootstrap;dur=8.32;desc=\"bootstrap_0+8.32\";offset=0,post-init-delay;dur=88656.97;desc=\"post-init-delay_3631+88656.97\";offset=3631,import-fn;dur=3597.52;desc=\"import-fn_8.32+3597.52\";offset=8.32,bytecode;dur=0.52;desc=\"bytecode_0+0.52\";offset=0,response;dur=5217.9;desc=\"response_92288.02+5217.9\";offset=92288.02,total-latency;dur=3631.05;desc=\"total-latency_0+3631.05\";offset=0,ttfb;dur=8848.95;desc=\"ttfb_0+8848.95\";offset=0,fetch;dur=967;desc=\"fetch_94657.14+967\";offset=94657.14"}},"responseTime":5218,"msg":"request completed"}
2025-11-15 05:56:48.687 [warning] Failed to sync Supabase user with database: Failed query: select "id", "email", "name", "plan", "is_admin", "subscription_id", "subscription_status", "generation_count", "api_key", "api_usage", "balance", "last_reset_at", "deleted_at", "created_at", "updated_at" from "users" where "users"."email" = $1 limit $2
params: alcatecable@gmail.com,1
2025-11-15 05:56:45.011 [info] OpenTelemetry SDK started successfully
2025-11-15 05:56:45.011 [info] üíæ Idempotency storage initialized: Database (persistent)
2025-11-15 05:56:45.011 [info] ‚úÖ Rate limiters initialized for all AI providers
2025-11-15 05:56:45.011 [info] {"level":30,"time":1763186116417,"pid":4,"hostname":"169.254.22.37","msg":"ViberDoc Multi-Provider LLM System"}
2025-11-15 05:56:45.011 [info] {"level":30,"time":1763186116417,"pid":4,"hostname":"169.254.22.37","providers":["Google AI (Gemini)","Groq","DeepSeek","OpenAI"],"msg":"Configured AI Providers"}
2025-11-15 05:56:45.011 [info] {"level":30,"time":1763186116417,"pid":4,"hostname":"169.254.22.37","dbConfigured":true,"msg":"Database"}
2025-11-15 05:56:45.011 [info] {"level":30,"time":1763186116417,"pid":4,"hostname":"169.254.22.37","supabaseConfigured":true,"msg":"Supabase"}
2025-11-15 05:56:45.011 [info] üöÄ Initializing BullMQ Queue (production mode)...
2025-11-15 05:56:45.011 [info] üöÄ BullMQ Queue initialized: documentation-generation (5 workers)
2025-11-15 05:56:45.011 [info] üë∑ Worker started with 5 concurrent processors
2025-11-15 05:56:45.018 [info] ‚ùå Redis connection error: connect ETIMEDOUT
2025-11-15 05:56:45.021 [info] Error: connect ETIMEDOUT    at Socket.<anonymous> (/var/task/node_modules/ioredis/built/Redis.js:171:41)    at Object.onceWrapper (node:events:633:28)    at Socket.emit (node:events:519:28)    at Socket._onTimeout (node:net:604:8)    at listOnTimeout (node:internal/timers:588:17)    at process.processTimers (node:internal/timers:523:7) {  errorno: 'ETIMEDOUT',  code: 'ETIMEDOUT',  syscall: 'connect'}
2025-11-15 05:56:45.037 [info] ‚ùå Redis connection error: connect ETIMEDOUT
2025-11-15 05:56:45.038 [info] Error: connect ETIMEDOUT    at Socket.<anonymous> (/var/task/node_modules/ioredis/built/Redis.js:171:41)    at Object.onceWrapper (node:events:633:28)    at Socket.emit (node:events:519:28)    at Socket._onTimeout (node:net:604:8)    at listOnTimeout (node:internal/timers:588:17)    at process.processTimers (node:internal/timers:523:7) {  errorno: 'ETIMEDOUT',  code: 'ETIMEDOUT',  syscall: 'connect'}
2025-11-15 05:56:45.039 [info] Error: connect ETIMEDOUT    at Socket.<anonymous> (/var/task/node_modules/ioredis/built/Redis.js:171:41)    at Object.onceWrapper (node:events:633:28)    at Socket.emit (node:events:519:28)    at Socket._onTimeout (node:net:604:8)    at listOnTimeout (node:internal/timers:588:17)    at process.processTimers (node:internal/timers:523:7) {  errorno: 'ETIMEDOUT',  code: 'ETIMEDOUT',  syscall: 'connect'}
2025-11-15 05:56:45.039 [info] ‚ùå Redis connection error: connect ETIMEDOUT
2025-11-15 05:56:45.039 [info] Error: connect ETIMEDOUT    at Socket.<anonymous> (/var/task/node_modules/ioredis/built/Redis.js:171:41)    at Object.onceWrapper (node:events:633:28)    at Socket.emit (node:events:519:28)    at Socket._onTimeout (node:net:604:8)    at listOnTimeout (node:internal/timers:588:17)    at process.processTimers (node:internal/timers:523:7) {  errorno: 'ETIMEDOUT',  code: 'ETIMEDOUT',  syscall: 'connect'}
2025-11-15 05:56:45.190 [info] ‚úÖ Redis connected successfully
2025-11-15 05:56:45.191 [info] ‚úÖ Redis connected successfully
2025-11-15 05:56:45.194 [info] ‚úÖ Redis connected successfully